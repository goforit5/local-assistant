# Entity Resolution Configuration
# Version: 1.0.0
# Last Updated: 2025-11-06

fuzzy_matching:
  algorithm: fuzzywuzzy         # "fuzzywuzzy" | "levenshtein" | "trigram"
  name_similarity:
    threshold: 0.90              # 90%+ = match
    use_token_sort: true         # "ACME Corp" = "Corp ACME"
    use_partial_ratio: false     # Partial substring matching
  address_similarity:
    threshold: 0.85              # 85%+ = match
    normalize:
      remove_punctuation: true
      lowercase: true
      expand_abbreviations: true  # "St" → "Street", "Ave" → "Avenue"

deduplication:
  strategies:
    - name: exact_match
      priority: 1
      matchers:
        - field: name
          exact: true
        - field: tax_id
          exact: true
    - name: high_confidence
      priority: 2
      matchers:
        - field: name
          fuzzy: true
          threshold: 0.95
        - field: address
          fuzzy: true
          threshold: 0.90
    - name: medium_confidence
      priority: 3
      matchers:
        - field: name
          fuzzy: true
          threshold: 0.85

manual_review_queue:
  enabled: true
  confidence_threshold: 0.80     # < 80% confidence → manual review
  queue_table: entity_review_queue
  notification: false            # Future: email admin

caching:
  enabled: true
  backend: memory                # "memory" | "redis"
  ttl_seconds: 3600              # 1 hour
  max_entries: 10000
